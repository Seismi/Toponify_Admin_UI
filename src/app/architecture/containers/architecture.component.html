<app-base-header>
  <app-toolbar-column [fillFreeSpace]="true">
    <app-search></app-search>
  </app-toolbar-column>
  <app-toolbar-column>
    <app-zoom-actions
      [attributesView]="attributesView"
      (zoomIn)="onZoomIn($event)"
      (zoomOut)="onZoomOut($event)"
    ></app-zoom-actions>
    <app-layout-actions *ngIf="!attributesView"
      (showGrid)="onShowGrid($event)"
      [showOrHideGrid]="showOrHideGrid"
      (zoomMap)="onZoomMap($event)"
  ></app-layout-actions>
  </app-toolbar-column>
  <app-toolbar-column>
    <smi-quicklinks-actions
      [gojsView]="true"
      [allowEditLayouts]="allowEditLayouts"
      [allowEditWorkPackages]="allowEditWorkPackages"
      [workpackages]="workpackage$ | async"
      [scopes]="scopes$ | async"
      [layouts]="scopeDetails$ | async"
      (editWorkPackage)="allowEditWorkPackage($event)"
      (editLayout)="allowEditLayout($event)"
      (selectWorkPackage)="onSelectWorkPackage($event)"
      (selectScope)="onSelectScope($event)"
      (selectLayout)="onSelectLayout($event)">
    </smi-quicklinks-actions>
  </app-toolbar-column>
</app-base-header>
<app-model-container [topPadding]="64">
  <smi-left-sidebar
    *ngIf="!showOrHideLeftPane"
    (leftTab)="openLeftTab($event)"
    [workPackageIsEditable]="workPackageIsEditable">
  </smi-left-sidebar>
  <app-model-sidebar [minWidth]="430" [maxWidth]="1000" *ngIf="showOrHideLeftPane">
    <p class="leftPane">
      <smi-left-panel
        [data]="workpackage$ | async"
        [workPackageIsEditable]="workPackageIsEditable"
        (displayOptionsChangedEvent)="displayOptionsChanged($event)"
        (selectWorkPackage)="onSelectWorkPackage($event)"
        (selectColour)="selectColourForWorkPackage($event)"
        (hideLeftPane)="onHideLeftPane($event)"
        [selectedLeftTab]="selectedLeftTab">
      </smi-left-panel>
    </p>
  </app-model-sidebar>

  <app-model-content>
    <div style="padding: 5px">
      <app-architecture-diagram
        [mapView]="mapView"
        [showGrid]="showGrid"
        [allowMove]="allowMove"
        [workPackageIsEditable]="workPackageIsEditable"
        *ngIf="!showTable"
        [nodes]="nodes | layer:{byId: true}"
        [links]="links | layer:{byId: false}"
        [workpackageDetail]="workpackageDetail"
        [selectedWorkPackages]= "selectedWorkPackages$ | async"
        [workpackages]="workpackage$ | async"
        [viewLevel]="viewLevel$ | async"
        (partsSelected)="partsSelected($event)"
        (modelChanged)="modelChanged($event)"
        (nodeDeleteRequested)="handleNodeDeleteRequested($event)"
        (linkDeleteRequested)="handleLinkDeleteRequested($event)"
        (updateNodeLocation)="handleUpdateNodeLocation($event)">
      </app-architecture-diagram>
    </div>
  </app-model-content>
  <smi-right-sidebar
    data-hook="right-sidebar"
    *ngIf="!showOrHideRightPane"
    (rightTab)="openRightTab($event)"
    [objectSelected]="objectSelected"
    [multipleSelected]="multipleSelected">
  </smi-right-sidebar>
  <app-model-sidebar [isLast]="true" [maxWidth]="600" *ngIf="showOrHideRightPane">
    <p class="rightPane">
      <smi-right-panel
        [selectedRightTab]="selectedRightTab"
        [group]="objectDetailsForm"
        [clickedOnLink]="clickedOnLink"
        [isEditable]="isEditable"
        (editDetails)="onEditDetails($event)"
        (saveAttribute)="onSaveObjectDetails($event)"
        (deleteAttribute)="onDeleteAttribute($event)"
        [attributes]="selectedNode?.attributes"
        [relatedRadios]="selectedNode?.relatedRadios"
        [radio]="radio$ | async"
        [properties]="selectedNode?.customPropertyValues"
        [workpackages]="selectedNode?.relatedWorkPackages"
        (cancel)="onCancelEdit($event)"
        [workPackageIsEditable]="workPackageIsEditable"
        (addAttribute)="onAddAttribute($event)"
        (addRelatedRadio)="onAddRelatedRadio($event)"
        (hideRightPane)="onHideRightPane()"
        [objectSelected]="objectSelected"
        (addRadio)="onAddRadio()"
        [multipleSelected]="multipleSelected"
        (addScope)="onAddScope($event)"
    >
    </smi-right-panel>
  </app-model-sidebar>
</app-model-container>
