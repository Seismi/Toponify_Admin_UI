<div class="wrapper">
  <div class="search-container">
    <input placeholder="Search" data-qa="topology-work-packages-quick-search" (keyup)="onSearch($event.target.value)">
  </div>
  <table mat-table [dataSource]="dataSource">
    <ng-container matColumnDef="workpackage">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let element">
        <div class="row" [ngClass]="{ selected: element.selected }">
          <span class="title">{{ element.name }}</span>
          <mat-icon
            matTooltip="Open work package details"
            [routerLink]="['/work-packages', element.id]"
            queryParamsHandling="preserve"
          >
            open_in_new
          </mat-icon>
            <div class="actions">
              <mat-checkbox
                data-qa="topology-work-packages-select-work-package"
                class="checkbox"
                [disabled]="!canSelect(element)"
                [checked]="element.selected"
                (click)="onSelect(element.id, !element.selected, $event, element)"
              >
              </mat-checkbox>
              <label>Display</label>

              <ng-container *ngIf="canEdit(element); else elseBlock">
                <mat-icon
                  *ngIf="!element.edit"
                  (click)="onSetWorkpackageEditMode(element)"
                  matTooltip="Edit content of work package"
                  >edit</mat-icon
                >
                <mat-icon *ngIf="element.edit" (click)="onSetWorkpackageEditMode(element)">close</mat-icon>
                <label> {{ element.edit ? 'Close' : 'Edit' }} </label>
              </ng-container>

              <ng-template #elseBlock>
                <span style="opacity: 0.2;">
                  <mat-icon>{{ element.edit ? 'close' : 'edit' }}</mat-icon>
                  <label> {{ element.edit ? 'Close' : 'Edit' }} </label>
                </span>
              </ng-template>

              <smi-color-picker
                style="margin-right: 5px;"
                matTooltip="Colour of the objects modified by this work package"
                [workpackageColour]="element.displayColour"
                (selectColour)="onSelectColour($event, element.id)"
                [isEditable]="true"
              >
              </smi-color-picker>
              <label>Colour</label>
            </div>
          </div>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns" style="display: none;"></tr>
    <tr mat-row *matRowDef="let row; let i = index; columns: displayedColumns"></tr>
  </table>
  <br>
</div>
