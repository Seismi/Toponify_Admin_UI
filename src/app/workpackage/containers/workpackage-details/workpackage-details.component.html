<smi-right-sidebar 
  *ngIf="showOrHideRightPane" 
  [workPackagePage]="true"
  (rightTab)="openRightTab($event)">
</smi-right-sidebar>

<app-model-container *ngIf="!showOrHideRightPane">
  <app-model-sidebar [minWidth]="400" [maxWidth]="600" [isLast]="true">
    <p class="rightPane">
      <mat-tab-group mat-stretch-tabs class="stretched-tabs" [@.disabled]="true" [selectedIndex]="selectedRightTab">
        <mat-tab label="Details">
          <p class="detailsTab">
            <smi-workpackage-detail 
              data-hook="workpackage-detail" 
              [group]="workPackageDetailForm"
              (deleteWorkpackage)="onDeleteWorkpackage($event)" 
              (saveWorkpackage)="onSaveWorkpackage($event)"
              (editWorkPackage)="onEditWorkPackage($event)"
              (cancel)="onCancel($event)" 
              [baselineTableData]="workpackage?.baseline"
              [ownersTableData]="workpackage?.owners" 
              [approversTableData]="workpackage?.approvers"
              (deleteOwner)="onDeleteOwner($event)" 
              (selectOwner)="onSelectOwner($event)" 
              (addOwner)="onAddOwner($event)"
              [selectedOwner]="selectedOwner" 
              (addBaseline)="onAddBaseline($event)"
              (deleteBaseline)="onDeleteBaseline($event)" 
              (selectBaseline)="onSelectBaseline($event)"
              [selectedBaseline]="selectedBaseline"
              [statusDraft]="statusDraft"
              [isEditable]="isEditable"
              [workpackageActionSubmit]="workpackageActionSubmit"
              [workpackageActionApprove]="workpackageActionApprove"
              [workpackageActionReject]="workpackageActionReject"
              [workpackageActionMerge]="workpackageActionMerge"
              [workpackageActionReset]="workpackageActionReset"
              [workpackageActionSupersede]="workpackageActionSupersede"
              (submit)="submitWorkpackage($event)"
              (approve)="approveWorkpackage($event)"
              (reject)="rejectWorkpackage($event)"
              (merge)="mergeWorkpackage($event)"
              (reset)="resetWorkpackage($event)"
              (supersede)="supersedeWorkpackage($event)">
            </smi-workpackage-detail>
          </p>
        </mat-tab>
        <mat-tab label="Properties">
          <smi-properties-table
            data-hook="workpackage-page-properties-table"
            [data]="workpackage?.customPropertyValues">
          </smi-properties-table>
        </mat-tab>
        <mat-tab label="Objectives">
          <smi-objectives-table 
            data-hook="workpackage-page-objective-table" 
            [data]="workpackage?.objectives"
            [statusDraft]="statusDraft"
            (deleteObjective)="onDeleteObjectiveOrRadio($event, {objective: true})">
          </smi-objectives-table>
          <button *ngIf="statusDraft" class="add-radio-button" mat-raised-button color="primary" (click)="onAddObjectiveOrRadio({objective: true})">Add</button>
        </mat-tab>
        <mat-tab label="RADIO">
          <smi-radios-table
            data-hook="workpackage-page-radio-table"
            [data]="workpackage?.radios"
            [statusDraft]="statusDraft"
            (deleteRadio)="onDeleteObjectiveOrRadio($event, {objective: false})">
          </smi-radios-table>
          <button *ngIf="statusDraft" class="add-radio-button" mat-raised-button color="primary" (click)="onAddObjectiveOrRadio({objective: false})">Add</button>
        </mat-tab>
        <mat-tab label="Change Summary">
          <smi-change-table 
            data-hook="workpackage-page-change-table" 
            [data]="workpackage?.changes?.nodes?.additions">
          </smi-change-table>
        </mat-tab>
      </mat-tab-group>
      <br>
      <button class="hide-pane-button" mat-button (click)="onHideRightPane()">Hide<mat-icon>keyboard_arrow_right</mat-icon></button>
    </p>
  </app-model-sidebar>
</app-model-container>