<app-model-container>
  <smi-left-hand-pane
    [workPackageIsEditable]="workPackageIsEditable"
    [selectedLeftTab]="selectedLeftTab"
    (openSideBar)="openLeftTab($event)"
  >
  </smi-left-hand-pane>
  <mat-drawer-container class="drawer-container" autosize>
    <mat-drawer #drawer mode="side" class="left-sidebar">
      <smi-left-hand-pane-content (close)="drawer.close()">
        <smi-menu *ngIf="selectedLeftTab === 'menu'"></smi-menu>
      </smi-left-hand-pane-content>
    </mat-drawer>
    <app-base-header>
      <app-toolbar-column [fillFreeSpace]="true"> </app-toolbar-column>
      <app-search></app-search>
      <app-toolbar-column>
        <smi-quicklinks-actions></smi-quicklinks-actions>
      </app-toolbar-column>
    </app-base-header>
    <app-model-container class="diagram-container">
      <div class="container">
        <div class="row">
          <div class="col mat-elevation-z8">
            <mat-slide-toggle
              data-qa="work-packages-archive"
              color="primary"
              (change)="showArchivedWorkPackages($event)"
            >
              Show archived
            </mat-slide-toggle>
            <mat-tab-group [@.disabled]="true">
              <mat-tab>
                <ng-template mat-tab-label> <mat-icon>list</mat-icon> List </ng-template>
                <smi-workpackages-table
                  data-qa="work-packages-table"
                  [data]="workpackageEntities$ | async"
                  (workpackageSelected)="onSelectWorkpackage($event)"
                  (addWorkpackage)="onAddWorkPackage()"
                  [selectedRowIndex]="selectedRowIndex"
                >
                </smi-workpackages-table>
              </mat-tab>
              <mat-tab label="Diagram">
                <ng-template mat-tab-label> <mat-icon>device_hub</mat-icon> Diagram </ng-template>
                <ng-template matTabContent>
                  <smi-workpackage-tree
                    [checked]="checked"
                    (selectWorkpackage)="onSelectWorkpackage($event)"
                    [workpackages$]="workpackageEntities$ | async"
                  ></smi-workpackage-tree>
                </ng-template>
              </mat-tab>
            </mat-tab-group>
          </div>
          <div class="col">
            <smi-right-hand-side [title]="'Work Package'" (add)="onAddWorkPackage()"></smi-right-hand-side>
            <router-outlet></router-outlet>
          </div>
        </div>
      </div>
    </app-model-container>
  </mat-drawer-container>
</app-model-container>
