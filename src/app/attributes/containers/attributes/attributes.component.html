<app-model-container>
  <smi-left-hand-pane
    data-qa="rules-and-attributes-left-hand-pane"
    [workPackageIsEditable]="workPackageIsEditable"
    [selectedLeftTab]="selectedLeftTab"
    [sideNavActions]="true"
  >
  </smi-left-hand-pane>
  <app-drawer [tabTpls]="{ workpackages: workpackages }">
    <ng-template #workpackages>
      <smi-workpackage-tab-table
        data-qa="rules-and-attributes-work-package-table"
        *ngIf="selectedLeftTab !== 'menu'"
        [data]="workpackage$ | async"
        (selectWorkPackage)="onSelectWorkPackage($event)"
        (setWorkpackageEditMode)="onSelectEditWorkpackage($event)"
        [canSelectWorkpackage]="canSelectWorkpackage"
      >
      </smi-workpackage-tab-table>
    </ng-template>
    <app-base-header>
      <app-toolbar-column [fillFreeSpace]="true"> </app-toolbar-column>
      <smi-workpackage-name
        [selectedWorkPackageEntities]="selectedWorkPackageEntities"
        [workPackageIsEditable]="!workPackageIsEditable"
        (exitWorkPackageEditMode)="onExitWorkPackageEditMode()"
        (editWorkPackage)="onSelectEditWorkpackage($event)"
      >
      </smi-workpackage-name>
      <smi-scopes-dropdown
        data-qa="rules-and-attributes-scopes"
        class="scope-dropdown"
        [data]="scopes$ | async"
        [selectedScope]="selectedScope$ | async"
        (selectScope)="onSelectScope($event)"
      >
      </smi-scopes-dropdown>
      <app-search></app-search>
      <app-toolbar-column>
        <smi-quicklinks-actions></smi-quicklinks-actions>
      </app-toolbar-column>
    </app-base-header>
    <app-model-container class="diagram-container">
      <div class="container">
        <div class="row">
          <div class="col">
            <app-category-table
              data-qa="rules-and-attributes-table"
              [data]="categoryTableData"
              [categories]="['attribute', 'rule']"
              (selectRow)="onSelectAttribute($event)"
            >
            </app-category-table>
          </div>
          <div class="col">
            <smi-right-hand-side
              data-qa="rules-and-attributes-right-hand-side"
              [title]="'Attribute'"
              (add)="onAdd()"
              [disabled]="workPackageIsEditable"
            >
            </smi-right-hand-side>
            <router-outlet></router-outlet>
          </div>
        </div>
      </div>
    </app-model-container>
  </app-drawer>
</app-model-container>
